{% extends "base.html" %}
{% load static %}

{% block title %}Oferta Laboral - Llamkay{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet" href="{% static 'css/jobs/registro_empresa.css' %}" />
{% endblock %}

{% block content %}
<body class="fondo">
  <div class="seccion-container">
    <div class="form-container">
      <a href="{% url 'jobs:admin_empresa' %}" class="btn-volver">
        <i class="fas fa-arrow-left"></i> Volver
      </a>

      <h2 class="titulo-principal">ðŸ’¼ Oferta Laboral</h2>
      <p class="descripcion">Detalles del puesto disponible para primer trabajo</p>

      <div class="formulario">
        <form enctype="multipart/form-data" method="POST" id="form-empresa">
          {% csrf_token %}
          {{ form.non_field_errors }}

          <div class="fila">
            <div class="campo">
              {{ form.titulo_puesto.label_tag }}
              {{ form.titulo_puesto }}
            </div>
            <div class="campo">
              {{ form.rango_salarial.label_tag }}
              {{ form.rango_salarial }}
            </div>
          </div>

          <div class="fila">
            <div class="campo">
              {{ form.experiencia_requerida.label_tag }}
              {{ form.experiencia_requerida }}
            </div>
            <div class="campo">
              {{ form.modalidad_trabajo.label_tag }}
              {{ form.modalidad_trabajo }}
            </div>
          </div>

          <div class="campo">
            {{ form.descripcion_puesto.label_tag }}
            {{ form.descripcion_puesto }}
          </div>

          <div class="campo">
            {{ form.requisitos_calificaciones.label_tag }}
            {{ form.requisitos_calificaciones }}
          </div>

          <div class="campo">
            {{ form.beneficios_compensaciones.label_tag }}
            {{ form.beneficios_compensaciones }}
          </div>

          <div class="fila">
            <div class="campo">
              {{ form.fecha_limite.label_tag }}
              {{ form.fecha_limite }}
            </div>
            <div class="campo">
              {{ form.numero_postulantes.label_tag }}
              {{ form.numero_postulantes }}
            </div>
          </div>

          <div class="direccion">
            <div class="campo">
              <label>Departamento</label>
              {{ form.id_departamento }}
            </div>
            
            <div class="campo">
              <label>Provincia</label>
              {{ form.id_provincia }}
            </div>

            <div class="campo">
              <label>Distrito</label>
              {{ form.id_distrito }}
            </div>

            <div class="campo">
              <label>Comunidad</label>
              {{ form.id_comunidad }}
            </div>

            <div class="campo direccion-detalle">
              <label>DirecciÃ³n Detalle</label>
              {{ form.direccion_detalle }}
            </div>
          </div>

          <div class="campo">
            {{ form.numero_contacto.label_tag }}
            {{ form.numero_contacto }}
          </div>

          <div class="campo">
            {{ form.foto.label_tag }}
            {{ form.foto }}
            <img id="preview" class="image-preview" />
          </div>

          <div class="form-buttons">
            {% if modo_edicion %}
              <button type="submit" class="btn-editar">
                <i class="fas fa-save"></i> Guardar Cambios
              </button>
              <a href="{% url 'jobs:all_trabajos' %}" class="btn-cancelar">
                <i class="fas fa-times"></i> Cancelar
              </a>
            {% else %}
              <button type="submit" class="btn-registrar">
                <i class="fas fa-upload"></i> Publicar Oferta
              </button>
              <a href="{% url 'jobs:admin_empresa' %}" class="btn-cancelar">
                <i class="fas fa-times"></i> Cancelar
              </a>
            {% endif %}
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
{% endblock %}

{% block extra_js %}
<script>
  const urlCargarProvincias = "{% url 'jobs:ajax_cargar_provincias' %}";
  const urlCargarDistritos = "{% url 'jobs:ajax_cargar_distritos' %}";
  const urlCargarComunidades = "{% url 'jobs:ajax_cargar_comunidades' %}";
</script>
<script src="{% static 'js/jobs/registro_empresa.js' %}"></script>
{% endblock %}